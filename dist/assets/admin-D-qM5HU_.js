import"./style-7fttntmb.js";let l=[],r=[],s="";async function d(){try{const[t,e]=await Promise.all([fetch("/data/apps.json"),fetch("/data/sites.json")]);if(!t.ok)throw new Error(`Apps data loading failed: ${t.status}`);if(!e.ok)throw new Error(`Sites data loading failed: ${e.status}`);l=await t.json(),r=await e.json(),console.log("Loaded apps:",l.length),console.log("Loaded sites:",r.length),c(),i("Veriler başarıyla yüklendi")}catch(t){console.error("Error loading data:",t),i(`Veri yükleme hatası: ${t.message}`),l=[],r=[],c()}}function c(){const t=l.length,e=r.length,a=[...l,...r].filter(n=>n.usedInTR).length,o=new Set([...l.map(n=>n.category),...r.map(n=>n.category)]).size;document.getElementById("apps-count").textContent=t,document.getElementById("apps-total").textContent=t,document.getElementById("sites-count").textContent=e,document.getElementById("sites-total").textContent=e,document.getElementById("popular-count").textContent=a,document.getElementById("popular-total").textContent=a,document.getElementById("categories-count").textContent=o,document.getElementById("categories-total").textContent=o,console.log("Statistics updated:",{totalApps:t,totalSites:e,popularInTR:a,categories:o})}function p(t){s=t;const e=document.getElementById("quick-add-modal"),a=document.getElementById("modal-title"),o=document.getElementById("url-field");a.textContent=`Yeni ${t==="app"?"Uygulama":t==="website"?"Website":"Marka"} Ekle`,t==="website"||t==="brand"?(o.classList.remove("hidden"),o.querySelector("input").required=!0):(o.classList.add("hidden"),o.querySelector("input").required=!1),e.classList.remove("hidden"),i(`${t} ekleme formü açıldı`)}function m(){const t=document.getElementById("quick-add-modal"),e=document.getElementById("quick-add-form");t.classList.add("hidden"),e.reset()}function g(t){t.preventDefault();const e=new FormData(t.target),a=Object.fromEntries(e);a.usedInTR=a.usedInTR==="true",s==="website"||s==="brand"?(a.type=s,a.verificationStatus="pending",a.sources=[],a.description=a.reason,r.push(a)):l.push(a),c(),i(`Yeni ${s} eklendi: ${a.name}`),m(),y(),alert(`${a.name} başarıyla eklendi!`)}function y(){const t={apps:l,sites:r,lastModified:new Date().toISOString()};localStorage.setItem("boycott-data",JSON.stringify(t)),i("Değişiklikler kaydedildi (session storage)"),console.log("Data saved to localStorage:",t)}function f(){try{const t=localStorage.getItem("boycott-data");if(t){const e=JSON.parse(t);if(e.apps&&e.sites)return l=e.apps,r=e.sites,i("Local veriler yüklendi"),console.log("Loaded from localStorage"),!0}}catch(t){console.error("Error loading from localStorage:",t)}return!1}function h(){const t={apps:l,sites:r,exportDate:new Date().toISOString(),totalItems:l.length+r.length},e=JSON.stringify(t,null,2),a=new Blob([e],{type:"application/json"}),o=document.createElement("a");o.href=URL.createObjectURL(a),o.download=`boycott-data-${new Date().toISOString().split("T")[0]}.json`,o.click(),i("Tüm veri dışa aktarıldı")}function w(t){const e=t.target.files[0];if(!e)return;const a=new FileReader;a.onload=function(o){try{const n=JSON.parse(o.target.result);n.apps&&Array.isArray(n.apps)&&(l=[...l,...n.apps]),n.sites&&Array.isArray(n.sites)&&(r=[...r,...n.sites]),c(),i(`${e.name} dosyasından veri içe aktarıldı`),alert("Veri başarıyla içe aktarıldı!")}catch(n){alert("Dosya okuma hatası: "+n.message),i("Veri içe aktarma hatası")}},a.readAsText(e)}function S(){const t={timestamp:new Date().toISOString(),version:"1.0",data:{apps:l,sites:r},metadata:{totalApps:l.length,totalSites:r.length,categories:[...new Set([...l.map(n=>n.category),...r.map(n=>n.category)])]}},e=JSON.stringify(t,null,2),a=new Blob([e],{type:"application/json"}),o=document.createElement("a");o.href=URL.createObjectURL(a),o.download=`boycott-backup-${Date.now()}.json`,o.click(),i("Sistem yedeği oluşturuldu")}function k(){const t=[];l.forEach((e,a)=>{(!e.name||!e.category||!e.alternative||!e.reason)&&t.push(`Uygulama ${a+1}: Eksik alanlar`),typeof e.usedInTR!="boolean"&&t.push(`Uygulama ${a+1}: usedInTR boolean olmalı`)}),r.forEach((e,a)=>{(!e.name||!e.category||!e.alternative||!e.reason)&&t.push(`Site ${a+1}: Eksik alanlar`),e.url&&!D(e.url)&&t.push(`Site ${a+1}: Geçersiz URL`)}),t.length===0?(alert("Tüm veriler geçerli! ✅"),i("Veri doğrulama başarılı")):(alert(`${t.length} doğrulama hatası bulundu:

${t.join(`
`)}`),i(`${t.length} doğrulama hatası bulundu`))}function b(){const t=`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
        <loc>https://yourdomain.com/</loc>
        <lastmod>${new Date().toISOString().split("T")[0]}</lastmod>
        <priority>1.0</priority>
    </url>
    <url>
        <loc>https://yourdomain.com/apps.html</loc>
        <lastmod>${new Date().toISOString().split("T")[0]}</lastmod>
        <priority>0.9</priority>
    </url>
    <url>
        <loc>https://yourdomain.com/submit.html</loc>
        <lastmod>${new Date().toISOString().split("T")[0]}</lastmod>
        <priority>0.8</priority>
    </url>
</urlset>`,e=new Blob([t],{type:"application/xml"}),a=document.createElement("a");a.href=URL.createObjectURL(e),a.download="sitemap.xml",a.click(),i("Sitemap oluşturuldu")}function I(){d(),i("İstatistikler güncellendi")}function i(t){const e=document.getElementById("recent-activity"),a=new Date().toLocaleTimeString("tr-TR"),o=document.createElement("div");for(o.className="flex items-center text-sm text-gray-500",o.innerHTML=`
        <span class="w-2 h-2 bg-blue-400 rounded-full mr-3"></span>
        <span>${t} - ${a}</span>
    `,e.insertBefore(o,e.firstChild);e.children.length>10;)e.removeChild(e.lastChild)}function u(){const t=new Date;document.getElementById("current-time").textContent=t.toLocaleString("tr-TR")}function D(t){try{return new URL(t),!0}catch{return!1}}document.addEventListener("DOMContentLoaded",function(){u(),setInterval(u,6e4),document.getElementById("quick-add-form").addEventListener("submit",g),i("Admin paneli başlatıldı"),f()&&(c(),i("Önbellekten veriler yüklendi")),d()});function E(){localStorage.removeItem("boycott-data"),i("Local storage temizlendi"),l=[],r=[],d(),alert("Local storage temizlendi ve veriler yeniden yüklendi!")}window.showQuickAdd=p;window.closeQuickAdd=m;window.exportAllData=h;window.importData=w;window.generateBackup=S;window.validateAllData=k;window.generateSitemap=b;window.updateStats=I;window.clearLocalStorage=E;
